(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-ad4a9eba"],{"0737":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("Breadcrumb",{attrs:{text:"用户列表"}}),s("el-card",[s("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addUser}},[e._v("添加用户")]),s("el-table",{attrs:{data:e.adminUserList,border:"",stripe:""}},[s("el-table-column",{attrs:{label:"用户名",prop:"username"}}),s("el-table-column",{attrs:{label:"权限等级",prop:"level"}}),s("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(s){return e.edit(t.row)}}},[e._v("编辑")]),s("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(s){return e._delete(t.row)}}},[e._v("删除")])]}}])})],1)],1),s("el-dialog",{attrs:{title:this.model._id?"编辑用户":"添加用户",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t},closed:e.dialogClose}},[s("el-form",{attrs:{"label-width":"80px"}},[s("el-form-item",{attrs:{label:"用户名"}},[s("el-input",{model:{value:e.model.username,callback:function(t){e.$set(e.model,"username",t)},expression:"model.username"}})],1),this.model._id?e._e():s("el-form-item",{attrs:{label:"权限等级"}},[s("el-input",{model:{value:e.model.level,callback:function(t){e.$set(e.model,"level",t)},expression:"model.level"}})],1),s("el-form-item",{attrs:{label:"密码"}},[s("el-input",{model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}})],1)],1),s("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),s("el-button",{attrs:{type:"primary"},on:{click:e.ok}},[e._v("确 定")])],1)],1)],1)},a=[],l=s("5fc7"),r=s("1bab");function n(e){return Object(r["a"])({url:"/admin_users",method:"post",data:e})}function o(e){return Object(r["a"])({url:"/admin_users/"+e})}function d(e,t){return Object(r["a"])({url:"/admin_users/"+e,method:"put",data:t})}function c(e){return Object(r["a"])({url:"/admin_users/"+e,method:"delete"})}function u(){return Object(r["a"])({url:"/admin_users"})}var m={name:"AdminUserList",data(){return{adminUserList:[],model:{},dialogVisible:!1}},components:{Breadcrumb:l["a"]},methods:{async getAdminUserList(){const e=await u();this.adminUserList=e.data},addUser(){this.dialogVisible=!0},async edit(e){this.id=e._id;const t=await o(this.id);this.model=t.data,this.dialogVisible=!0},async ok(){if(this.model._id){const e=await d(this.id,this.model);if(!e)return;this.$message.success("编辑用户成功"),this.getAdminUserList(),this.dialogVisible=!1}else{const e=await n(this.model);if(!e)return;this.$message.success("创建用户成功"),this.getAdminUserList(),this.dialogVisible=!1}},async _delete(e){try{await this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const t=await c(e._id);this.$message.success(t.data.message),this.getAdminUserList()}catch(t){this.$message.info("已取消删除")}},dialogClose(){this.model={}}},created(){this.getAdminUserList()}},b=m,p=s("4ac2"),f=Object(p["a"])(b,i,a,!1,null,"771934c3",null);t["default"]=f.exports},"5fc7":function(e,t,s){"use strict";var i=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[s("el-breadcrumb-item",[e._v(e._s(e.text))])],1)},a=[],l={name:"Breadcrumb",props:{text:{type:String,default:""}}},r=l,n=s("4ac2"),o=Object(n["a"])(r,i,a,!1,null,"403b8861",null);t["a"]=o.exports}}]);
//# sourceMappingURL=chunk-ad4a9eba.af8be4e3.js.map