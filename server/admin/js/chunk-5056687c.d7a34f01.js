(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5056687c"],{"5e18":function(t,e,a){"use strict";a("e47c")},"5fc7":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",[t._v(t._s(t.text))])],1)},s=[],l={name:"Breadcrumb",props:{text:{type:String,default:""}}},o=l,n=a("4ac2"),r=Object(n["a"])(o,i,s,!1,null,"403b8861",null);e["a"]=r.exports},aff8:function(t,e,a){"use strict";a.d(e,"a",(function(){return o}));var i=a("82ae"),s=a.n(i),l="https://huazai.loca.lt";s.a.get("./url.txt").then((function(t){l=t.data})).catch(t=>{console.error(t)});const o={computed:{action(){return Object({NODE_ENV:"production",BASE_URL:"/wzry/back/"}).VUE_APP_API_URL_UPLOAD||l+"/admin/api/upload/"},token(){const t=sessionStorage.getItem("token");return t?{Authorization:t}:{}}},methods:{uploadErrHandler(t){401===t.status&&(this.$message.error("请先登录"),router.push("/login"))}}}},e47c:function(t,e,a){},ed9e:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Breadcrumb",{attrs:{text:"广告位列表"}}),a("el-card",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addAd}},[t._v("添加广告位")]),a("el-table",{attrs:{data:t.adList,border:"",stripe:""}},[a("el-table-column",{attrs:{label:"广告位名称",prop:"name"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"small",type:"primary",icon:"el-icon-edit"},on:{click:function(a){return t.edit(e.row)}}},[t._v("编辑")]),a("el-button",{attrs:{size:"small",type:"danger",icon:"el-icon-delete"},on:{click:function(a){return t._delete(e.row)}}},[t._v("删除")])]}}])})],1)],1),a("el-dialog",{staticClass:"add-ad-dialog",attrs:{title:this.model._id?"编辑广告位":"添加广告位",visible:t.dialogVisible},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.dialogClose}},[a("el-form",{attrs:{"label-width":"86px"}},[a("el-form-item",{attrs:{label:"广告位名称"}},[a("el-input",{model:{value:t.model.name,callback:function(e){t.$set(t.model,"name",e)},expression:"model.name"}})],1),a("el-button",{attrs:{type:"primary",icon:"el-icon-plus",size:"itemssmall"},on:{click:t.addAds}},[t._v("添加广告位信息")]),a("el-row",{staticStyle:{"flex-wrap":"wrap"},attrs:{gutter:20,type:"flex"}},t._l(t.model.items,(function(e,i){return a("el-col",{key:i,staticClass:"skill-item",attrs:{span:12}},[a("el-card",[a("el-tag",[t._v("广告位"+t._s(i+1))]),a("el-form-item",{attrs:{label:"图片:","label-width":"80px"}},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.action+"ad",headers:t.token,"show-file-list":!1,"on-success":function(a){return t.$set(e,"img",a.url)},"on-error":t.uploadErrHandler}},[e.img?a("img",{staticClass:"ad-img",attrs:{src:e.img}}):a("i",{staticClass:"el-icon-plus avatar-uploader-icon"})])],1),a("el-form-item",{attrs:{label:"跳转链接:","label-width":"80px"}},[a("el-input",{model:{value:e.url,callback:function(a){t.$set(e,"url",a)},expression:"item.url"}})],1),a("el-button",{attrs:{type:"danger"},on:{click:function(e){return t.deleteAdInfo(i)}}},[t._v("删除")])],1)],1)})),1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.ok}},[t._v("确 定")])],1)],1)],1)},s=[],l=a("5fc7"),o=a("1bab");function n(t){return Object(o["a"])({url:"/ads",method:"post",data:t})}function r(t){return Object(o["a"])({url:"/ads/"+t})}function c(t,e){return Object(o["a"])({url:"/ads/"+t,method:"put",data:e})}function d(t){return Object(o["a"])({url:"/ads/"+t,method:"delete"})}function u(){return Object(o["a"])({url:"/ads"})}var m=a("aff8"),p={name:"AdList",mixins:[m["a"]],data(){return{adList:[],dialogVisible:!1,model:{items:[]},id:""}},components:{Breadcrumb:l["a"]},methods:{async getAdList(){const t=await u();this.adList=t.data},async edit(t){this.id=t._id;const e=await r(this.id);this.model=e.data,this.dialogVisible=!0},async _delete(t){try{await this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"});const e=await d(t._id);if(!e)return;this.$message.success("删除成功"),this.getAdList()}catch(e){this.$message.info("已取消删除")}},addAd(){this.dialogVisible=!0},addAds(){this.model.items.push({})},async ok(){if(this.model._id){const t=await c(this.id,this.model);if(!t)return;this.$message.success("编辑成功"),this.getAdList(),this.dialogVisible=!1}else{const t=await n(this.model);if(!t)return;this.$message.success("创建广告位成功"),this.getAdList(),this.dialogVisible=!1}},dialogClose(){this.model={items:[]}},deleteAdInfo(t){this.model.items.splice(t,1)}},created(){this.getAdList()}},f=p,b=(a("5e18"),a("4ac2")),h=Object(b["a"])(f,i,s,!1,null,null,null);e["default"]=h.exports}}]);
//# sourceMappingURL=chunk-5056687c.d7a34f01.js.map